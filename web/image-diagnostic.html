<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å›¾ç‰‡è¯Šæ–­ - ç³»ç»Ÿæ¶æ„è®¾è®¡å¸ˆå­¦ä¹ å¹³å°</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            max-width: 1000px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f7fa;
        }
        .container {
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #667eea;
            margin-bottom: 30px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid #667eea;
        }
        .test-item {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 5px;
        }
        .status {
            display: inline-block;
            padding: 5px 10px;
            border-radius: 3px;
            font-weight: bold;
            margin-left: 10px;
        }
        .status.success {
            background: #d4edda;
            color: #155724;
        }
        .status.error {
            background: #f8d7da;
            color: #721c24;
        }
        .status.warning {
            background: #fff3cd;
            color: #856404;
        }
        button {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background: #764ba2;
        }
        .image-preview {
            max-width: 200px;
            max-height: 150px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .info {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ–¼ï¸ å›¾ç‰‡è¯Šæ–­å·¥å…·</h1>

        <div class="info">
            <strong>ğŸ“ è¯´æ˜ï¼š</strong> è¿™ä¸ªå·¥å…·ä¼šæ£€æµ‹å›¾ç‰‡è·¯å¾„å’ŒåŠ è½½çŠ¶æ€ã€‚
        </div>

        <button onclick="testImages()">ğŸ” å¼€å§‹æ£€æµ‹</button>
        <button onclick="location.reload()">ğŸ”„ é‡æ–°åŠ è½½</button>
        <button onclick="window.location.href='index.html'">ğŸ  è¿”å›ä¸»é¡µ</button>

        <div class="test-section">
            <h2>1. å›¾ç‰‡ç›®å½•æ£€æµ‹</h2>
            <div id="directory-test"></div>
        </div>

        <div class="test-section">
            <h2>2. å›¾ç‰‡è·¯å¾„æµ‹è¯•</h2>
            <div id="path-test"></div>
        </div>

        <div class="test-section">
            <h2>3. å›¾ç‰‡åŠ è½½æµ‹è¯•</h2>
            <div id="load-test"></div>
        </div>

        <div class="test-section">
            <h2>4. è·¯å¾„ä¿®å¤å»ºè®®</h2>
            <div id="fix-suggestion"></div>
        </div>
    </div>

    <script>
        async function testImages() {
            testDirectory();
            testPaths();
            testLoading();
            showFixSuggestion();
        }

        // æµ‹è¯•å›¾ç‰‡ç›®å½•
        async function testDirectory() {
            const div = document.getElementById('directory-test');
            div.innerHTML = '<p>æ£€æµ‹ä¸­...</p>';

            const testPaths = [
                '../images/',
                '../images/01_è®¡ç®—æœºç¡¬ä»¶/',
                '../images/02_æ“ä½œç³»ç»ŸçŸ¥è¯†/',
                '../images/03_æ•°æ®åº“ç³»ç»Ÿ/'
            ];

            let html = '<ul>';
            for (const path of testPaths) {
                try {
                    const response = await fetch(path);
                    if (response.ok) {
                        html += `<li>âœ… ${path} <span class="status success">å­˜åœ¨</span></li>`;
                    } else {
                        html += `<li>âŒ ${path} <span class="status error">ä¸å­˜åœ¨</span></li>`;
                    }
                } catch (error) {
                    html += `<li>âŒ ${path} <span class="status error">æ— æ³•è®¿é—®</span></li>`;
                }
            }
            html += '</ul>';
            div.innerHTML = html;
        }

        // æµ‹è¯•å›¾ç‰‡è·¯å¾„
        function testPaths() {
            const div = document.getElementById('path-test');
            
            const testCases = [
                {
                    original: './images/01_è®¡ç®—æœºç¡¬ä»¶/01_è®¡ç®—æœºç¡¬ä»¶-1.png',
                    fixed: '../images/01_è®¡ç®—æœºç¡¬ä»¶/01_è®¡ç®—æœºç¡¬ä»¶-1.png',
                    description: 'ç›¸å¯¹è·¯å¾„ï¼ˆ./images/ï¼‰'
                },
                {
                    original: 'images/01_è®¡ç®—æœºç¡¬ä»¶/01_è®¡ç®—æœºç¡¬ä»¶-1.png',
                    fixed: '../images/01_è®¡ç®—æœºç¡¬ä»¶/01_è®¡ç®—æœºç¡¬ä»¶-1.png',
                    description: 'ç›¸å¯¹è·¯å¾„ï¼ˆimages/ï¼‰'
                }
            ];

            let html = '<table style="width: 100%; border-collapse: collapse;">';
            html += '<tr style="background: #f8f9fa;"><th style="padding: 10px; text-align: left;">åŸå§‹è·¯å¾„</th><th style="padding: 10px; text-align: left;">ä¿®å¤åè·¯å¾„</th><th style="padding: 10px; text-align: left;">è¯´æ˜</th></tr>';
            
            testCases.forEach(test => {
                html += `
                    <tr style="border-bottom: 1px solid #e0e0e0;">
                        <td style="padding: 10px; font-family: monospace; font-size: 0.9em;">${test.original}</td>
                        <td style="padding: 10px; font-family: monospace; font-size: 0.9em; color: #28a745;">${test.fixed}</td>
                        <td style="padding: 10px;">${test.description}</td>
                    </tr>
                `;
            });
            html += '</table>';
            div.innerHTML = html;
        }

        // æµ‹è¯•å›¾ç‰‡åŠ è½½
        async function testLoading() {
            const div = document.getElementById('load-test');
            div.innerHTML = '<p>æµ‹è¯•ä¸­...</p>';

            const testImages = [
                '../images/01_è®¡ç®—æœºç¡¬ä»¶/01_è®¡ç®—æœºç¡¬ä»¶-1.png',
                '../images/01_è®¡ç®—æœºç¡¬ä»¶/01_è®¡ç®—æœºç¡¬ä»¶-2.png',
                '../images/02_æ“ä½œç³»ç»ŸçŸ¥è¯†/02_æ“ä½œç³»ç»ŸçŸ¥è¯†-1.png'
            ];

            let html = '';
            for (const imgPath of testImages) {
                html += `<div class="test-item">`;
                html += `<strong>æµ‹è¯•å›¾ç‰‡ï¼š</strong> ${imgPath}<br>`;
                
                const img = new Image();
                const loadPromise = new Promise((resolve) => {
                    img.onload = () => resolve(true);
                    img.onerror = () => resolve(false);
                    img.src = imgPath;
                });

                const loaded = await loadPromise;
                
                if (loaded) {
                    html += `<span class="status success">âœ… åŠ è½½æˆåŠŸ</span><br>`;
                    html += `<img src="${imgPath}" class="image-preview" alt="é¢„è§ˆ">`;
                } else {
                    html += `<span class="status error">âŒ åŠ è½½å¤±è´¥</span>`;
                }
                
                html += `</div>`;
            }
            
            div.innerHTML = html;
        }

        // æ˜¾ç¤ºä¿®å¤å»ºè®®
        function showFixSuggestion() {
            const div = document.getElementById('fix-suggestion');
            
            div.innerHTML = `
                <div class="info">
                    <h3>ğŸ”§ è‡ªåŠ¨ä¿®å¤è¯´æ˜</h3>
                    <p>ç³»ç»Ÿå·²è‡ªåŠ¨å®ç°ä»¥ä¸‹ä¿®å¤ï¼š</p>
                    <ul>
                        <li>âœ… è‡ªåŠ¨æ£€æµ‹å›¾ç‰‡è·¯å¾„</li>
                        <li>âœ… å°† <code>./images/</code> è½¬æ¢ä¸º <code>../images/</code></li>
                        <li>âœ… å°† <code>images/</code> è½¬æ¢ä¸º <code>../images/</code></li>
                        <li>âœ… å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå‹å¥½æç¤º</li>
                        <li>âœ… å›¾ç‰‡åŠ è½½æˆåŠŸåå¯ç‚¹å‡»æŸ¥çœ‹å¤§å›¾</li>
                    </ul>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: #d4edda; border-left: 4px solid #28a745; border-radius: 5px;">
                    <h3>âœ… ä½¿ç”¨æ–¹æ³•</h3>
                    <p>ç°åœ¨æ‰“å¼€ä»»æ„ç« èŠ‚ï¼Œå›¾ç‰‡åº”è¯¥å¯ä»¥æ­£å¸¸æ˜¾ç¤ºäº†ã€‚</p>
                    <p>å¦‚æœå›¾ç‰‡ä»ç„¶æ— æ³•æ˜¾ç¤ºï¼Œè¯·æ£€æŸ¥ï¼š</p>
                    <ol>
                        <li>images æ–‡ä»¶å¤¹æ˜¯å¦åœ¨é¡¹ç›®æ ¹ç›®å½•</li>
                        <li>å›¾ç‰‡æ–‡ä»¶æ˜¯å¦å­˜åœ¨</li>
                        <li>æ–‡ä»¶åæ˜¯å¦æ­£ç¡®ï¼ˆåŒºåˆ†å¤§å°å†™ï¼‰</li>
                        <li>æ˜¯å¦ä½¿ç”¨HTTPæœåŠ¡å™¨è¿è¡Œï¼ˆæ¨èï¼‰</li>
                    </ol>
                </div>

                <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-left: 4px solid #ffc107; border-radius: 5px;">
                    <h3>ğŸ’¡ é¢å¤–åŠŸèƒ½</h3>
                    <ul>
                        <li>ğŸ–¼ï¸ <strong>æŸ¥çœ‹å¤§å›¾</strong>ï¼šç‚¹å‡»å›¾ç‰‡å¯ä»¥æŸ¥çœ‹å¤§å›¾</li>
                        <li>âš ï¸ <strong>é”™è¯¯æç¤º</strong>ï¼šå›¾ç‰‡åŠ è½½å¤±è´¥æ—¶ä¼šæ˜¾ç¤ºå‹å¥½æç¤º</li>
                        <li>ğŸ¨ <strong>ç¾åŒ–æ•ˆæœ</strong>ï¼šå›¾ç‰‡è‡ªåŠ¨æ·»åŠ åœ†è§’å’Œé˜´å½±</li>
                    </ul>
                </div>
            `;
        }
    </script>
</body>
</html>
