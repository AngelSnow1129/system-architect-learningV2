# 第13章：系统架构设计 - 知识提纲与重难点

## 📊 章节概况
- **考试重要性**：⭐⭐⭐⭐⭐
- **考试频率**：极高（每年20分左右）
- **建议学习时间**：15-20小时
- **主要题型**：选择题、案例分析题、论文题

---

## 🎯 核心知识点框架

### 重点1：软件架构基本概念 ⭐⭐⭐⭐⭐
**难度**：★★★☆☆
**考试频率**：极高

**软件架构定义：** ⭐⭐⭐⭐⭐
```
定义：软件架构为软件系统提供了一个结构、行为和属性的高级抽象

组成：
1. 构件的描述
2. 构件的相互作用（连接件）
3. 指导构件集成的模式
4. 这些模式的约束

作用：
- 指定系统的组织结构和拓扑结构
- 显示系统需求和构件之间的对应关系
- 提供设计决策的基本原理
```

**软件架构的作用：** ⭐⭐⭐⭐⭐
```
1. 项目干系人进行交流的手段
2. 明确对系统实现的约束条件
3. 决定开发和维护组织的组织结构
4. 制约系统的质量属性
5. 使推理和控制的更改更加简单
6. 有助于循序渐进的原型设计
7. 可以作为培训的基础
8. 是可传递和可复用的模型
9. 可以预测软件的质量
```

**构件与连接件：** ⭐⭐⭐⭐⭐

**构件（Component）：**
```
定义：独立可交付的功能单元，外界通过接口访问其提供的服务

特性：
1. 独立部署单元
2. 作为第三方的组装单元
3. 没有（外部的）可见状态

类型：
- 原子构件：部署、版本控制和替换的基本单位
- 模块：不带单独资源的原子构件
```

**连接件（Connector）：**
```
定义：构件之间的交互机制

类型：
- 过程调用
- 消息传递
- 事件广播
- 数据流
- 共享数据
```

**构件技术标准：** ⭐⭐⭐⭐⭐
```
1. EJB（Enterprise Java Bean）：
   - 由Sun公司制定
   - 类型：会话Bean、实体Bean、消息驱动Bean
   - 实现企业级应用程序的业务逻辑

2. COM/DCOM/COM+：
   - 微软公司的构件标准
   - COM：组件对象模型
   - DCOM：分布式COM，具有位置独立性
   - COM+：COM的更高层次应用

3. CORBA（公共对象请求代理体系结构）：
   - 三个层次：
     * 对象请求代理（ORB）：分布对象系统的"软总线"
     * 公共对象服务：并发、名字、事务、安全等服务
     * 公共设施：组件框架，业务对象协作规则
```

### 重点2：软件架构风格 ⭐⭐⭐⭐⭐
**难度**：★★★★☆
**考试频率**：极高

**架构风格分类：** ⭐⭐⭐⭐⭐

**1. 数据流风格：** ⭐⭐⭐⭐⭐

**批处理序列：**
```
特点：
- 构件为一系列固定顺序的计算单元
- 构件之间只通过数据传递交互
- 每个处理步骤是独立的程序
- 每一步必须在前一步结束后才能开始
- 数据必须是完整的，以整体方式传递

适用场景：
- 数据处理系统
- 编译器的早期阶段
- 批量数据转换

优点：
- 简单易理解
- 易于维护

缺点：
- 不支持交互
- 并发性差
- 高延迟
```

**管道-过滤器（Pipe-Filter）：** ⭐⭐⭐⭐⭐
```
特点：
- 每个构件（过滤器）有一组输入和输出
- 构件读取输入数据流，经过内部处理，产生输出数据流
- 前一个构件的输出作为后一个构件的输入
- 过滤器是构件，管道是连接件

适用场景：
- Unix Shell命令
- 编译器
- 信号处理
- 并行处理

优点：
- 良好的隐蔽性和高内聚、低耦合
- 允许设计者将整个系统的输入输出行为看作是若干过滤器的行为的简单合成
- 支持软件重用
- 系统维护和增强系统性能简单
- 支持并行执行
- 易于进行死锁分析

缺点：
- 通常导致进程成为批处理结构
- 不适合处理交互的应用
- 因为在数据传输上没有通用的标准，每个过滤器都增加了解析和合成数据的工作，导致系统性能下降，并增加了编写过滤器的复杂度
```

**批处理 vs 管道-过滤器：** ⭐⭐⭐⭐⭐
```
批处理序列：
- 前后构件不一定有关联
- 数据作为整体传递
- 必须前一个执行完才能执行下一个
- 串行执行

管道-过滤器：
- 前一个输出作为后一个输入
- 数据流式传递
- 前面执行部分可以开始下一个的执行
- 可以并行执行
```

**2. 调用/返回风格：** ⭐⭐⭐⭐⭐

**主程序/子程序：**
```
特点：
- 单线程控制
- 把问题划分为若干个处理步骤
- 构件为主程序和子程序
- 子程序可合成为模块
- 过程调用作为交互机制（连接件）

适用场景：
- 结构化程序设计
- 传统的过程式编程

优点：
- 易于分解
- 易于理解

缺点：
- 全局数据易被破坏
- 紧耦合
```

**面向对象（OO）：** ⭐⭐⭐⭐⭐
```
特点：
- 构件是对象
- 对象是抽象数据类型的实例
- 连接件是对象间交互的方式
- 对象通过函数和过程的调用来交互

适用场景：
- 需要封装和继承的系统
- 需要多态的系统
- 面向对象编程语言

优点：
- 封装性好
- 可维护性强
- 支持继承和多态
- 易于理解和修改

缺点：
- 为了通过另一个对象的方法来访问该对象，必须知道该对象的标识
- 副作用的产生和控制
```

**层次结构（Layered）：** ⭐⭐⭐⭐⭐
```
特点：
- 构件组成层次结构
- 连接件通过协议定义层间如何交互
- 每层为上一层提供服务，使用下一层的服务
- 只能见到与自己邻接的层
- 修改某一层，最多影响其相邻的两层

适用场景：
- OSI七层模型
- TCP/IP协议栈
- 操作系统
- 企业应用系统

优点：
1. 支持基于可增加抽象层的设计
2. 允许将复杂问题分解成增量步骤序列
3. 不同层次处于不同的抽象级别
4. 每层最多只影响两层
5. 只要给相邻层提供相同接口，允许每层用不同方法实现
6. 支持软件复用

缺点：
1. 并不是每个系统都可以很容易划分为分层模式
2. 很难找到合适的、正确的层次抽象方法
3. 性能损失（每层都有开销）
```

**3. 独立构件风格：** ⭐⭐⭐⭐⭐

**进程通信：**
```
特点：
- 构件是独立的进程
- 连接件是消息传递
- 构件通常是命名过程
- 消息传递方式：点对点、异步、同步、RPC

适用场景：
- 分布式系统
- 并发系统
- 微服务架构

优点：
- 进程独立
- 并发性好
- 可分布部署

缺点：
- 通信开销大
- 同步复杂
```

**事件驱动系统（隐式调用）：** ⭐⭐⭐⭐⭐
```
特点：
- 构件不直接调用过程，而是触发或广播事件
- 构件中的过程在事件中注册
- 当事件被触发时，系统自动调用注册的所有过程
- 构件是匿名的过程
- 连接件是过程之间的隐式调用

适用场景：
- GUI系统
- 消息队列系统
- 发布-订阅系统
- 事件驱动架构（EDA）

优点：
- 为软件复用提供强大支持
- 为构件的维护和演化带来方便
- 松耦合

缺点：
- 构件放弃了对系统计算的控制
- 数据交换的问题
- 无法预知响应顺序
- 难以调试
```

**4. 虚拟机风格：** ⭐⭐⭐⭐

**解释器：**
```
特点：
- 包含完成解释工作的解释引擎
- 包含一个存储源代码的存储区
- 包含一个记录解释引擎当前工作状态的数据结构

适用场景：
- 脚本语言（Python、JavaScript）
- 规则引擎
- 虚拟机（JVM）

优点：
- 可移植性好
- 灵活性高
- 易于实现

缺点：
- 执行效率低
```

**基于规则的系统：**
```
特点：
- 包含规则集
- 包含规则解释器
- 包含规则选择器
- 包含工作内存

适用场景：
- 专家系统
- 业务规则引擎
- 工作流引擎

优点：
- 规则易于修改
- 支持知识表示

缺点：
- 效率问题
- 规则冲突
```

**5. 仓库风格：** ⭐⭐⭐⭐⭐

**数据库系统：**
```
特点：
- 以数据为中心
- 所有操作围绕数据中心进行
- 数据存储在中央数据库
- 多个构件共享数据

适用场景：
- 信息管理系统
- 数据密集型应用
- 需要数据共享的系统

优点：
- 数据一致性好
- 易于备份和恢复
- 支持并发访问

缺点：
- 中央数据库成为瓶颈
- 单点故障风险
```

**黑板系统：**
```
特点：
- 知识源之间不直接通信
- 通过共享的黑板进行交互
- 控制器监控黑板状态
- 根据黑板内容触发知识源

适用场景：
- 人工智能系统
- 模式识别
- 语音识别

优点：
- 知识源独立
- 易于扩展

缺点：
- 难以调试
- 性能问题
```

**超文本系统：**
```
特点：
- 信息以节点和链接的形式组织
- 用户通过链接浏览信息

适用场景：
- Web应用
- 帮助系统
- 知识库

优点：
- 灵活的信息组织
- 易于导航

缺点：
- 容易迷失方向
- 维护困难
```

### 重点3：架构风格对比与选择 ⭐⭐⭐⭐⭐
**难度**：★★★★☆
**考试频率**：极高

**架构风格对比表：** ⭐⭐⭐⭐⭐

| 风格类别 | 代表风格 | 主要特点 | 适用场景 |
|---------|---------|---------|---------|
| 数据流 | 管道-过滤器 | 数据流式处理 | 编译器、信号处理 |
| 数据流 | 批处理序列 | 顺序批量处理 | 数据转换 |
| 调用/返回 | 主程序/子程序 | 过程调用 | 结构化编程 |
| 调用/返回 | 面向对象 | 对象交互 | OO系统 |
| 调用/返回 | 层次结构 | 分层服务 | 网络协议、OS |
| 独立构件 | 进程通信 | 消息传递 | 分布式系统 |
| 独立构件 | 事件驱动 | 事件触发 | GUI、消息队列 |
| 虚拟机 | 解释器 | 解释执行 | 脚本语言 |
| 虚拟机 | 规则系统 | 规则驱动 | 专家系统 |
| 仓库 | 数据库 | 数据中心 | 信息系统 |
| 仓库 | 黑板 | 共享知识库 | AI系统 |

**典型考题：** ⭐⭐⭐⭐⭐

**题目1：** Unix Shell命令通过管道符"|"连接多个命令，这属于哪种架构风格？
A. 批处理序列  B. 管道-过滤器  C. 事件驱动  D. 层次结构

**分析：**
- 关键词："管道符"、"连接多个命令"
- 前一个命令的输出作为后一个命令的输入
- 典型的管道-过滤器风格

**答案：B**

**题目2：** OSI七层模型属于哪种架构风格？
A. 管道-过滤器  B. 面向对象  C. 层次结构  D. 仓库

**分析：**
- 关键词："七层模型"
- 每层为上层提供服务，使用下层服务
- 典型的层次结构风格

**答案：C**

**快速记忆法：** ⭐⭐⭐⭐⭐

**架构风格分类：**
```
"数调独虚仓"
- 数据流：批处理、管道-过滤器
- 调用/返回：主程序/子程序、面向对象、层次结构
- 独立构件：进程通信、事件驱动
- 虚拟机：解释器、规则系统
- 仓库：数据库、黑板、超文本
```

**管道-过滤器特点：**
```
"流式处理，并行执行，前输后入"
```

**层次结构特点：**
```
"上用下服，只见邻层，改动影响小"
```

**事件驱动特点：**
```
"触发广播，隐式调用，松耦合"
```

**易错点提醒：** ⭐⭐⭐⭐⭐
1. 批处理和管道-过滤器的区别：整体vs流式
2. 层次结构只能访问相邻层，不能跨层
3. 事件驱动是隐式调用，不是显式调用
4. 黑板系统的知识源不直接通信
5. 解释器属于虚拟机风格，不是独立构件
6. 仓库风格以数据为中心，不是以控制为中心

---

## 📝 学习建议

1. **重点掌握**：
   - 五大架构风格分类
   - 管道-过滤器、层次结构、事件驱动
   - 各风格的特点和适用场景

2. **学习方法**：
   - 理解每种风格的核心思想
   - 对比记忆相似风格
   - 结合实际案例理解

3. **考试技巧**：
   - 看关键词判断风格
   - 注意风格的优缺点
   - 理解适用场景

---

## 🎓 总结

本章重点：
- 架构风格是核心，五大分类要记牢
- 管道-过滤器、层次结构、事件驱动是重点
- 理解特点和适用场景，能够正确选择


## 13.X 必背知识点速查 ⭐⭐⭐⭐⭐

### 架构风格五大类（必背）⭐⭐⭐⭐⭐
```
1. 数据流风格
   - 批处理序列
   - 管道-过滤器

2. 调用/返回风格
   - 主程序/子程序
   - 面向对象
   - 层次结构

3. 独立构件风格
   - 进程通信
   - 事件驱动（隐式调用）

4. 虚拟机风格
   - 解释器
   - 基于规则的系统

5. 仓库风格
   - 数据库系统
   - 黑板系统
   - 超文本系统

记忆口诀：数调独虚仓（数据流、调用返回、独立构件、虚拟机、仓库）
```

### 构件技术三大标准（必背）⭐⭐⭐⭐⭐
```
┌──────┬──────────┬──────────┬──────────┐
│标准  │ EJB      │ COM/DCOM │ CORBA    │
├──────┼──────────┼──────────┼──────────┤
│制定者│ Sun      │ Microsoft│ OMG      │
├──────┼──────────┼──────────┼──────────┤
│语言  │ Java     │ 语言无关 │ 语言无关 │
├──────┼──────────┼──────────┼──────────┤
│平台  │ 跨平台   │ Windows  │ 跨平台   │
├──────┼──────────┼──────────┼──────────┤
│核心  │ Bean容器 │ COM对象  │ ORB      │
├──────┼──────────┼──────────┼──────────┤
│类型  │ 会话Bean │ COM      │ 对象请求 │
│      │ 实体Bean │ DCOM     │ 代理     │
│      │ 消息Bean │ COM+     │          │
└──────┴──────────┴──────────┴──────────┘

记忆口诀：
EJB是Java的Bean，Sun公司来制定
COM是微软的宝，Windows上最可靠
CORBA跨平台强，ORB是软总线棒
```

### 管道-过滤器 vs 批处理（必背）⭐⭐⭐⭐⭐
```
┌──────────┬──────────┬──────────┐
│特征      │ 管道过滤器│ 批处理   │
├──────────┼──────────┼──────────┤
│数据传递  │ 流式传递 │ 整体传递 │
├──────────┼──────────┼──────────┤
│执行方式  │ 可并行   │ 串行     │
├──────────┼──────────┼──────────┤
│前后关系  │ 输出→输入│ 不一定   │
├──────────┼──────────┼──────────┤
│开始时机  │ 部分完成 │ 全部完成 │
│          │ 即可开始 │ 才开始   │
├──────────┼──────────┼──────────┤
│典型应用  │ Unix管道 │ 数据转换 │
│          │ 编译器   │ 批量处理 │
└──────────┴──────────┴──────────┘

记忆口诀：
管道流式可并行，前输出后输入
批处理整体要串行，全完成才开始
```

### 层次结构特点（必背）⭐⭐⭐⭐⭐
```
核心特点：
1. 每层为上层提供服务
2. 每层使用下层的服务
3. 只能看到相邻层
4. 修改某层最多影响相邻两层

典型应用：
- OSI七层模型
- TCP/IP协议栈
- 操作系统分层
- MVC架构

优点（必背）：
1. 支持抽象层设计
2. 增量开发
3. 不同抽象级别
4. 最多影响两层
5. 接口相同可替换
6. 支持复用

缺点（必背）：
1. 不是所有系统都能分层
2. 难找合适的层次
3. 性能损失（每层开销）

记忆口诀：
上用下服务，下为上服务
只见相邻层，改动影响小
```

### 事件驱动系统（必背）⭐⭐⭐⭐⭐
```
核心特点：
1. 不直接调用，而是触发事件
2. 过程在事件中注册
3. 事件触发时自动调用注册过程
4. 构件匿名，隐式调用

典型应用：
- GUI系统（按钮点击）
- 消息队列（MQ）
- 发布-订阅（Pub-Sub）
- 事件驱动架构（EDA）

优点（必背）：
1. 强大的复用支持
2. 维护演化方便
3. 松耦合

缺点（必背）：
1. 放弃计算控制
2. 数据交换问题
3. 无法预知响应顺序
4. 难以调试

记忆口诀：
不直接调用触发事件，注册过程自动调用
松耦合易复用维护，但难控制难调试
```

### 架构风格选择对照表（必背）⭐⭐⭐⭐⭐
```
┌──────────┬──────────────┬──────────────┐
│需求特征  │ 推荐架构风格 │ 典型应用     │
├──────────┼──────────────┼──────────────┤
│数据转换  │ 管道-过滤器  │ 编译器、Unix │
├──────────┼──────────────┼──────────────┤
│分层抽象  │ 层次结构     │ OSI、TCP/IP  │
├──────────┼──────────────┼──────────────┤
│用户交互  │ 事件驱动     │ GUI、Web     │
├──────────┼──────────────┼──────────────┤
│数据共享  │ 仓库（数据库)│ 信息系统     │
├──────────┼──────────────┼──────────────┤
│并发处理  │ 进程通信     │ 分布式系统   │
├──────────┼──────────────┼──────────────┤
│规则推理  │ 基于规则     │ 专家系统     │
├──────────┼──────────────┼──────────────┤
│封装继承  │ 面向对象     │ OO系统       │
└──────────┴──────────────┴──────────────┘
```

## 13.Y 快速记忆口诀大全 ⭐⭐⭐⭐⭐

### 架构风格分类
```
数据流风格两兄弟：批处理和管道滤
调用返回三姐妹：主子程序、OO、层次
独立构件双胞胎：进程通信、事件驱
虚拟机风格两类型：解释器和规则系
仓库风格三形式：数据库、黑板、超文本
```

### 管道-过滤器特点
```
管道连接过滤器，数据流式来传递
前输出后输入，可以并行处理
Unix管道是典型，编译器也常用
```

### 层次结构特点
```
层次结构分层次，上用下来下服务
只能看到相邻层，修改最多影响俩
OSI七层是典型，TCP/IP也分层
```

### 事件驱动特点
```
事件驱动不直调，触发事件来通知
注册过程自动调，松耦合易维护
GUI系统最常用，消息队列也适合
```

### 构件技术标准
```
EJB是Java专用，Sun公司来制定
COM是微软标准，Windows上运行
CORBA跨平台强，OMG组织定标准
```

### 架构风格优缺点
```
管道过滤器：
优：并行、复用、易维护
缺：批处理、不交互、性能降

层次结构：
优：抽象、增量、可替换
缺：难分层、难抽象、有开销

事件驱动：
优：复用、维护、松耦合
缺：难控制、难调试、顺序乱

面向对象：
优：封装、继承、多态好
缺：要知标识、有副作用
```

## 13.Z 典型例题精讲 ⭐⭐⭐⭐⭐

### 例题1：架构风格识别 ⭐⭐⭐⭐⭐
Unix Shell中使用管道符"|"连接多个命令，如"ls | grep txt | wc -l"，这属于哪种架构风格？
A. 批处理序列  B. 管道-过滤器  C. 层次结构  D. 事件驱动

**解析**：
```
关键特征识别：
1. 使用管道符"|"连接
2. 前一个命令的输出作为后一个命令的输入
3. 可以并行执行
4. 数据流式传递

这些特征都符合管道-过滤器风格：
- ls是过滤器（列出文件）
- grep是过滤器（过滤包含txt的行）
- wc是过滤器（统计行数）
- |是管道（连接件）
```
**答案**：B

### 例题2：层次结构特点 ⭐⭐⭐⭐⭐
关于层次结构架构风格，以下说法错误的是？
A. 每层为上层提供服务
B. 每层可以调用任意层的服务
C. 修改某层最多影响相邻两层
D. OSI七层模型是典型应用

**解析**：
```
层次结构的核心特点：
1. 每层为上层提供服务 ✓
2. 每层使用下层的服务 ✓
3. 只能看到相邻层 ✓（不能调用任意层）
4. 修改某层最多影响相邻两层 ✓

选项B错误：层次结构中，每层只能看到和使用相邻层的服务，
不能跨层调用。这是层次结构的重要约束。
```
**答案**：B

### 例题3：事件驱动系统 ⭐⭐⭐⭐⭐
以下哪个不是事件驱动架构的优点？
A. 支持软件复用  B. 易于维护  C. 松耦合  D. 易于调试

**解析**：
```
事件驱动架构的优点：
1. 为软件复用提供强大支持 ✓
2. 为构件的维护和演化带来方便 ✓
3. 松耦合 ✓

事件驱动架构的缺点：
1. 构件放弃了对系统计算的控制
2. 数据交换的问题
3. 无法预知响应顺序
4. 难以调试 ✗（这是缺点，不是优点）

选项D"易于调试"是错误的，事件驱动系统由于事件触发的
不确定性和异步性，实际上很难调试。
```
**答案**：D

### 例题4：构件技术标准 ⭐⭐⭐⭐⭐
以下关于构件技术标准的叙述，错误的是？
A. EJB是Sun公司制定的Java构件标准
B. COM/DCOM是微软公司的构件标准
C. CORBA是跨平台的构件标准
D. EJB只能在Windows平台上运行

**解析**：
```
构件技术标准对比：

EJB（Enterprise Java Bean）：
- 制定者：Sun公司
- 语言：Java
- 平台：跨平台（JVM）✓
- 不是只能在Windows上运行 ✗

COM/DCOM/COM+：
- 制定者：Microsoft
- 语言：语言无关
- 平台：Windows

CORBA：
- 制定者：OMG
- 语言：语言无关
- 平台：跨平台

选项D错误：EJB基于Java，可以在任何支持JVM的平台上运行，
不是只能在Windows上运行。
```
**答案**：D

### 例题5：管道-过滤器 vs 批处理 ⭐⭐⭐⭐⭐
管道-过滤器架构风格与批处理序列的主要区别是？
A. 数据传递方式  B. 构件类型  C. 连接件类型  D. 应用领域

**解析**：
```
管道-过滤器 vs 批处理序列：

数据传递方式（主要区别）：
- 管道-过滤器：流式传递，部分数据即可开始处理
- 批处理序列：整体传递，必须全部数据才能处理

执行方式：
- 管道-过滤器：可以并行执行
- 批处理序列：必须串行执行

前后关系：
- 管道-过滤器：前一个的输出是后一个的输入
- 批处理序列：前后不一定有直接关联

选项A正确：数据传递方式是两者的主要区别。
```
**答案**：A

### 例题6：架构风格选择 ⭐⭐⭐⭐⭐
某系统需要将用户界面、业务逻辑和数据访问分离，最适合采用哪种架构风格？
A. 管道-过滤器  B. 层次结构  C. 事件驱动  D. 黑板系统

**解析**：
```
需求分析：
- 需要分离不同关注点
- 用户界面、业务逻辑、数据访问是不同的抽象层次
- 需要支持独立修改和替换

层次结构特点：
1. 支持不同抽象层次的分离
2. 每层为上层提供服务
3. 修改某层不影响其他层（只要接口不变）
4. 典型的三层架构：表示层、业务层、数据层

这正是层次结构架构风格的典型应用场景。

其他选项：
- 管道-过滤器：适合数据转换流程
- 事件驱动：适合用户交互系统
- 黑板系统：适合AI和模式识别
```
**答案**：B

### 例题7：CORBA架构 ⭐⭐⭐⭐⭐
CORBA的核心是？
A. Bean容器  B. COM对象  C. ORB  D. 消息队列

**解析**：
```
CORBA（Common Object Request Broker Architecture）
公共对象请求代理体系结构

三个层次：
1. 对象请求代理（ORB）← 核心
   - 分布对象系统的"软总线"
   - 负责对象间的通信
   - 提供位置透明性

2. 公共对象服务
   - 并发、名字、事务、安全等服务

3. 公共设施
   - 组件框架
   - 业务对象协作规则

ORB是CORBA的核心，就像总线是计算机系统的核心一样。

其他选项：
- Bean容器：EJB的核心
- COM对象：COM/DCOM的核心
- 消息队列：消息中间件的核心
```
**答案**：C

### 例题8：架构风格综合 ⭐⭐⭐⭐⭐
某编译器系统采用词法分析→语法分析→语义分析→代码生成的流程，每个阶段的输出作为下一阶段的输入，各阶段可以并行处理。这属于哪种架构风格？
A. 批处理序列  B. 管道-过滤器  C. 层次结构  D. 主程序/子程序

**解析**：
```
关键特征识别：
1. 有明确的处理流程 ✓
2. 前一阶段的输出作为后一阶段的输入 ✓（管道特征）
3. 各阶段可以并行处理 ✓（管道特征）
4. 数据流式传递 ✓（管道特征）

判断：
- 批处理序列：必须串行，不能并行 ✗
- 管道-过滤器：可并行，流式传递 ✓
- 层次结构：强调抽象层次，不是数据流 ✗
- 主程序/子程序：强调调用关系，不是数据流 ✗

虽然编译器也可以用批处理实现，但题目明确说"可以并行处理"，
这是管道-过滤器的典型特征。
```
**答案**：B

## 13.AA 易错点提醒 ⭐⭐⭐⭐⭐

### 易错点1：管道-过滤器 vs 批处理
```
❌ 错误：管道-过滤器就是批处理
✅ 正确：
管道-过滤器：
- 流式传递，可并行
- 前输出→后输入
- 部分完成即可开始

批处理：
- 整体传递，必须串行
- 前后不一定关联
- 全部完成才能开始

记忆：看到"并行"、"流式"→管道-过滤器
```

### 易错点2：层次结构的调用关系
```
❌ 错误：层次结构中任意层可以调用任意层
✅ 正确：
- 只能看到相邻层
- 上层使用下层服务
- 下层为上层提供服务
- 不能跨层调用

记忆：层次结构=相邻层交互
```

### 易错点3：事件驱动的优缺点
```
❌ 错误：事件驱动易于调试
✅ 正确：
优点：复用、维护、松耦合
缺点：难控制、难调试、顺序不确定

记忆：事件驱动=松耦合但难调试
```

### 易错点4：构件技术标准的平台
```
❌ 错误：EJB只能在Windows上运行
✅ 正确：
- EJB：跨平台（基于Java/JVM）
- COM/DCOM：Windows平台
- CORBA：跨平台

记忆：Java的都跨平台，微软的在Windows
```

### 易错点5：架构风格的选择
```
❌ 错误：所有系统都适合层次结构
✅ 正确：
- 数据转换流程 → 管道-过滤器
- 分层抽象 → 层次结构
- 用户交互 → 事件驱动
- 数据共享 → 仓库（数据库）
- 并发处理 → 进程通信

记忆：根据需求特征选择架构风格
```

### 易错点6：CORBA的核心
```
❌ 错误：CORBA的核心是Bean容器
✅ 正确：
- EJB的核心：Bean容器
- COM的核心：COM对象
- CORBA的核心：ORB（对象请求代理）

记忆：CORBA=ORB（软总线）
```

### 易错点7：面向对象架构风格
```
❌ 错误：面向对象没有缺点
✅ 正确：
优点：封装、继承、多态
缺点：
- 必须知道对象标识才能调用
- 可能产生副作用

记忆：OO虽好，但要知道对象标识
```

## 13.BB 真题精选 ⭐⭐⭐⭐⭐

### 真题1（2022年）
Unix Shell中使用"|"连接命令，这属于（）架构风格。
A. 批处理  B. 管道-过滤器  C. 层次结构  D. 事件驱动

**答案**：B
**解析**：Unix管道是管道-过滤器架构风格的典型应用。

### 真题2（2021年）
层次结构架构风格中，修改某一层最多影响（）。
A. 所有层  B. 上下各一层  C. 同一层  D. 不影响其他层

**答案**：B
**解析**：层次结构中，修改某层最多影响其相邻的两层（上下各一层）。

### 真题3（2020年）
以下不是事件驱动架构优点的是（）。
A. 支持复用  B. 易于维护  C. 松耦合  D. 易于调试

**答案**：D
**解析**：事件驱动架构难以调试，因为无法预知响应顺序。

### 真题4（2019年）
CORBA的核心是（）。
A. Bean容器  B. COM对象  C. ORB  D. 消息队列

**答案**：C
**解析**：ORB（对象请求代理）是CORBA的核心，是分布对象系统的"软总线"。

### 真题5（2018年）
某系统需要将表示层、业务层、数据层分离，最适合采用（）架构风格。
A. 管道-过滤器  B. 层次结构  C. 事件驱动  D. 黑板系统

**答案**：B
**解析**：三层架构是层次结构架构风格的典型应用。

## 13.CC 考试答题技巧 ⭐⭐⭐⭐⭐

### 技巧1：快速识别架构风格
```
关键词识别法：
- "管道"、"|"、"流式"、"并行" → 管道-过滤器
- "层"、"分层"、"抽象"、"OSI" → 层次结构
- "事件"、"触发"、"注册"、"GUI" → 事件驱动
- "数据库"、"共享数据"、"中央存储" → 仓库
- "进程"、"消息"、"分布式" → 进程通信
```

### 技巧2：判断管道 vs 批处理
```
看三个特征：
1. 能否并行？能→管道，不能→批处理
2. 数据传递？流式→管道，整体→批处理
3. 前后关系？输出→输入→管道，无关→批处理
```

### 技巧3：层次结构题目
```
记住核心约束：
1. 只能看相邻层
2. 上用下服务
3. 最多影响两层
4. 接口不变可替换

看到"跨层调用"、"影响所有层"→错误
```

### 技巧4：构件技术标准
```
记住三个对应：
- EJB → Sun → Java → 跨平台
- COM/DCOM → Microsoft → 语言无关 → Windows
- CORBA → OMG → 语言无关 → 跨平台

核心记忆：
- EJB → Bean容器
- COM → COM对象
- CORBA → ORB（软总线）
```

### 技巧5：优缺点判断
```
常见陷阱：
- 事件驱动"易于调试" → 错（难调试）
- 层次结构"无性能损失" → 错（有开销）
- 管道-过滤器"适合交互" → 错（不适合）
- 面向对象"无副作用" → 错（有副作用）
```

---

**本节学习建议**：
1. 重点记忆五大架构风格分类和特点
2. 掌握管道-过滤器与批处理的区别
3. 理解层次结构的核心约束
4. 记住三大构件技术标准的对比
5. 熟悉各架构风格的优缺点
6. 多做真题，熟悉题型和陷阱
7. 使用口诀和对比表辅助记忆
