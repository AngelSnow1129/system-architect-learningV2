# 第11章：面向对象技术 - 必背补充内容（续）

### 例题5：单例模式 ⭐⭐⭐⭐⭐
单例模式的核心特点是？
A. 提供全局访问点  B. 只能创建一个实例  C. 延迟加载  D. 线程安全

**解析**：
```
单例模式（Singleton Pattern）：

核心特点：
- 确保一个类只有一个实例 ← 核心
- 提供全局访问点 ← 重要但不是核心

实现要点：
1. 私有构造函数（防止外部创建）
2. 静态实例变量（保存唯一实例）
3. 静态获取方法（提供全局访问）

两种实现：
1. 饿汉式：类加载时创建实例（线程安全）
2. 懒汉式：第一次使用时创建（需要加锁）

选项分析：
A. 提供全局访问点：重要特点，但不是核心
B. 只能创建一个实例：核心特点 ✓
C. 延迟加载：只有懒汉式才有
D. 线程安全：需要额外处理

记忆：单例=唯一实例
```
**答案**：B

### 例题6：工厂方法 vs 抽象工厂 ⭐⭐⭐⭐⭐
工厂方法模式和抽象工厂模式的主要区别是？
A. 工厂方法创建一种产品，抽象工厂创建产品族
B. 工厂方法是类模式，抽象工厂是对象模式
C. 工厂方法使用继承，抽象工厂使用组合
D. 工厂方法简单，抽象工厂复杂

**解析**：
```
工厂方法模式（Factory Method）：
- 定义创建对象的接口
- 子类决定实例化哪个类
- 一个工厂方法创建一种产品
- 例：JDBC的Connection工厂

抽象工厂模式（Abstract Factory）：
- 提供创建一系列相关对象的接口
- 创建产品族（多个相关产品）
- 多个工厂方法创建多种产品
- 例：UI组件工厂（Button、TextField等）

主要区别：
- 工厂方法：一个工厂方法 → 一种产品
- 抽象工厂：一个工厂 → 一族产品（多种产品）

记忆：
- 工厂方法=一种产品
- 抽象工厂=产品族（多种产品）
```
**答案**：A

### 例题7：装饰模式 vs 代理模式 ⭐⭐⭐⭐⭐
装饰模式和代理模式的主要区别是？
A. 装饰模式增强功能，代理模式控制访问
B. 装饰模式使用继承，代理模式使用组合
C. 装饰模式是结构型，代理模式是行为型
D. 装饰模式简单，代理模式复杂

**解析**：
```
装饰模式（Decorator）：
- 意图：动态地给对象添加额外的职责
- 目的：增强功能、扩展功能
- 特点：可以递归包装多层
- 例：Java IO流（BufferedReader包装FileReader）

代理模式（Proxy）：
- 意图：为对象提供代理以控制对它的访问
- 目的：控制访问、延迟加载、权限控制
- 特点：代理和真实对象实现相同接口
- 例：远程代理、虚拟代理、保护代理

主要区别：
- 装饰：增强原有功能（功能扩展）
- 代理：控制对象访问（访问控制）

记忆：
- 装饰=装饰品=增强美观=增强功能
- 代理=代理人=控制访问=访问控制
```
**答案**：A

### 例题8：观察者模式 ⭐⭐⭐⭐⭐
观察者模式的典型应用场景是？
A. 对象创建  B. 接口适配  C. 事件监听  D. 算法切换

**解析**：
```
观察者模式（Observer Pattern）：

定义：
- 定义对象间一对多的依赖关系
- 当一个对象状态改变时，所有依赖它的对象都得到通知

角色：
1. 主题（Subject）：被观察的对象
2. 观察者（Observer）：观察主题的对象

工作流程：
1. 观察者向主题注册
2. 主题状态改变
3. 主题通知所有观察者
4. 观察者更新自己的状态

典型应用：
- 事件监听系统（GUI）✓
- MVC模式（Model变化通知View）
- 消息订阅系统
- 发布-订阅模式

记忆：观察者=监听者=事件监听
```
**答案**：C

## 11.AA 易错点提醒 ⭐⭐⭐⭐⭐

### 易错点1：重载 vs 重写
```
❌ 错误：重写在编译时确定
✅ 正确：
- 重载：编译时确定（静态绑定）
- 重写：运行时确定（动态绑定）

记忆：
- Overload=Load多个=编译时选择
- Override=Ride在上面=运行时覆盖
```

### 易错点2：组合 vs 聚合
```
❌ 错误：公司和员工是组合关系
✅ 正确：
- 组合：部分不能独立存在（人和心脏）
- 聚合：部分可以独立存在（公司和员工）

判断方法：
问：部分能否离开整体独立存在？
- 能 → 聚合（空心菱形◇）
- 不能 → 组合（实心菱形◆）
```

### 易错点3：关联 vs 依赖
```
❌ 错误：方法参数是关联关系
✅ 正确：
- 关联：属性关系，长期（实线箭头→）
- 依赖：参数关系，临时（虚线箭头┄>）

判断方法：
- 是类的属性 → 关联
- 是方法的参数 → 依赖
```

### 易错点4：UML箭头方向
```
❌ 错误：继承箭头指向子类
✅ 正确：
- 泛化（继承）：箭头指向父类
- 实现：箭头指向接口
- 依赖：箭头指向被依赖方
- 关联：箭头指向被关联方
- 聚合/组合：菱形指向整体

记忆：箭头指向被依赖/被继承/被实现的一方
```

### 易错点5：工厂方法 vs 抽象工厂
```
❌ 错误：工厂方法和抽象工厂是一样的
✅ 正确：
- 工厂方法：一个工厂方法创建一种产品
- 抽象工厂：一个工厂创建一族产品（多种）

记忆：
- 工厂方法=单一产品
- 抽象工厂=产品族
```

### 易错点6：装饰 vs 代理
```
❌ 错误：装饰模式和代理模式完全相同
✅ 正确：
- 装饰：增强功能（功能扩展）
- 代理：控制访问（访问控制）

记忆：
- 装饰=装饰品=增强
- 代理=代理人=控制
```

### 易错点7：单例模式线程安全
```
❌ 错误：单例模式一定是线程安全的
✅ 正确：
- 饿汉式：线程安全（类加载时创建）
- 懒汉式：需要加锁才线程安全

记忆：
- 饿汉=提前吃=类加载时创建=线程安全
- 懒汉=延迟吃=使用时创建=需要加锁
```

## 11.BB 真题精选 ⭐⭐⭐⭐⭐

### 真题1（2022年）
以下不属于面向对象三大特征的是（）。
A. 封装  B. 继承  C. 多态  D. 抽象

**答案**：D
**解析**：面向对象三大特征是封装、继承、多态。

### 真题2（2021年）
UML类图中，关系强度从强到弱的顺序是（）。
A. 依赖>关联>聚合>组合>泛化
B. 泛化>组合>聚合>关联>依赖
C. 组合>聚合>泛化>关联>依赖
D. 泛化>聚合>组合>关联>依赖

**答案**：B
**解析**：关系强度：泛化>组合>聚合>关联>依赖。

### 真题3（2020年）
以下哪个是组合关系？
A. 公司和员工  B. 汽车和轮胎  C. 人和心脏  D. 班级和学生

**答案**：C
**解析**：人和心脏是组合关系，心脏不能离开人独立存在。

### 真题4（2019年）
单例模式的核心特点是（）。
A. 提供全局访问点  B. 只能创建一个实例  C. 延迟加载  D. 线程安全

**答案**：B
**解析**：单例模式的核心是确保一个类只有一个实例。

### 真题5（2018年）
工厂方法模式和抽象工厂模式的主要区别是（）。
A. 工厂方法创建一种产品，抽象工厂创建产品族
B. 工厂方法是类模式，抽象工厂是对象模式
C. 工厂方法使用继承，抽象工厂使用组合
D. 工厂方法简单，抽象工厂复杂

**答案**：A
**解析**：工厂方法创建一种产品，抽象工厂创建产品族（多种产品）。

### 真题6（2017年）
装饰模式和代理模式的主要区别是（）。
A. 装饰模式增强功能，代理模式控制访问
B. 装饰模式使用继承，代理模式使用组合
C. 装饰模式是结构型，代理模式是行为型
D. 装饰模式简单，代理模式复杂

**答案**：A
**解析**：装饰模式用于增强功能，代理模式用于控制访问。

## 11.CC 考试答题技巧 ⭐⭐⭐⭐⭐

### 技巧1：识别面向对象特征
```
关键词识别：
- "信息隐藏"、"访问控制" → 封装
- "代码复用"、"继承" → 继承
- "接口统一"、"动态绑定" → 多态
```

### 技巧2：区分重载和重写
```
看两个关键点：
1. 位置：同类→重载，父子类→重写
2. 绑定：编译时→重载，运行时→重写

记忆：
- 重载=Load=加载多个=编译时
- 重写=Override=覆盖=运行时
```

### 技巧3：判断UML关系
```
看三个要素：
1. 箭头：实线/虚线
2. 箭头头：三角/普通箭头
3. 尾部：菱形/无

判断流程：
- 有三角 → 泛化（实线）或实现（虚线）
- 有菱形 → 组合（实心）或聚合（空心）
- 普通箭头 → 关联（实线）或依赖（虚线）
```

### 技巧4：区分组合和聚合
```
问一个问题：
部分能否离开整体独立存在？
- 能 → 聚合（空心菱形）
- 不能 → 组合（实心菱形）

典型例子：
- 组合：人和心脏、房子和房间
- 聚合：公司和员工、班级和学生
```

### 技巧5：识别设计模式
```
看意图和应用场景：
- "唯一实例" → 单例
- "创建对象" → 工厂
- "接口转换" → 适配器
- "增强功能" → 装饰
- "控制访问" → 代理
- "一对多通知" → 观察者
- "算法切换" → 策略
```

### 技巧6：工厂模式选择
```
看产品数量：
- 一种产品 → 工厂方法
- 多种产品（产品族）→ 抽象工厂

记忆：
- 工厂方法=单一产品
- 抽象工厂=产品族
```

### 技巧7：装饰 vs 代理
```
看目的：
- 增强功能 → 装饰
- 控制访问 → 代理

看应用：
- IO流包装 → 装饰
- 远程调用、延迟加载 → 代理
```

---

**本章学习建议**：
1. 重点记忆面向对象三大特征的定义和区别
2. 掌握重载和重写的区别（必考）
3. 熟练掌握UML类图六种关系及其表示法
4. 理解组合和聚合的本质区别
5. 掌握常用设计模式的意图和应用场景
6. 多做UML图的绘制和识别练习
7. 使用口诀和对比表辅助记忆
8. 真题中的UML关系题要仔细看箭头和菱形
